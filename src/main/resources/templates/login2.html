<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login Page</title>
    <!-- SHA-512 해시를 위한 JavaScript -->
    <script src="../sha512.js" type="text/javascript"></script>
    <script language="JavaScript">
        function hashPassword() {
            var passwordField = document.getElementById("memPwd");
            var hashedPasswordField = document.getElementById("hashedPwd");

            // 비밀번호 해시 처리
            var hashedPassword = hex_sha512(passwordField.value);
            hashedPasswordField.value = hashedPassword;

            // 원래 비밀번호는 전송하지 않도록 초기화
            passwordField.value = "";
        }
    </script>
</head>
<body>
<h2>Login</h2>

<form th:action="@{/login}" method="post" onsubmit="hashPassword()">
    <label for="memId">Username:</label>
    <input type="text" id="memId" name="memId" required><br><br>

    <label for="memPwd">Password:</label>
    <input type="password" id="memPwd" name="memPwd" required><br><br>

    <!-- 해시된 비밀번호를 서버로 전송하기 위한 hidden input -->
    <input type="hidden" id="hashedPwd" name="memPassword">

    <button type="submit">Login</button>
</form>

<!-- 로그인 실패 시 에러 메시지 표시 -->
<div th:if="${error}" th:text="${error}"></div>

</body>
</html>